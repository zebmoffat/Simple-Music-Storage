CREATE TABLE RECORD_LABEL (
    LabelID INT PRIMARY KEY,
    Name VARCHAR(255),
    Address VARCHAR(255),
    PhoneNumber VARCHAR(20)
);
CREATE TABLE ARTIST (
    ArtistID INT PRIMARY KEY,
    Name VARCHAR(255),
    LabelID INT,
    FOREIGN KEY (LabelID) REFERENCES RECORD_LABEL(LabelID)
    ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE PRODUCER (
    ProducerID INT PRIMARY KEY,
    Name VARCHAR(255)
);
CREATE TABLE GENRE (
    GenreID INT PRIMARY KEY,
    Name VARCHAR(255)
);
CREATE TABLE ALBUM (
    AlbumID INT PRIMARY KEY,
    Name VARCHAR(255),
    LabelID INT,
    ProducerID INT,
    FOREIGN KEY (ProducerID) REFERENCES PRODUCER(ProducerID),
    FOREIGN KEY (LabelID) REFERENCES RECORD_LABEL(LabelID)
    ON DELETE CASCADE ON UPDATE CASCADE
);
CREATE TABLE SONG (
    SongID INT PRIMARY KEY,
    Name VARCHAR(255),
    TrackLength INT,
    AlbumID INT,
    GenreID INT,
    ProducerID INT,
    FOREIGN KEY (AlbumID) REFERENCES ALBUM(AlbumID),
    FOREIGN KEY (GenreID) REFERENCES GENRE(GenreID),
    FOREIGN KEY (ProducerID) REFERENCES PRODUCER(ProducerID)
    ON DELETE CASCADE ON UPDATE CASCADE
);
-- Create the relationships
-- ARTIST and SONG have a CREATED relationship (M:N)
CREATE TABLE CREATED (
    ArtistID INT,
    SongID INT,
    PRIMARY KEY (ArtistID, SongID),
    FOREIGN KEY (ArtistID) REFERENCES ARTIST(ArtistID),
    FOREIGN KEY (SongID) REFERENCES SONG(SongID)
    ON DELETE CASCADE ON UPDATE CASCADE
);
-- ARTIST and ALBUM have a MADE relationship (M:N)
CREATE TABLE MADE (
        ArtistID INT,
        AlbumID INT,
        PRIMARY KEY (ArtistID, AlbumID),
        FOREIGN KEY (ArtistID) REFERENCES ARTIST(ArtistID),
        FOREIGN KEY (AlbumID) REFERENCES ALBUM(AlbumID)
        ON DELETE CASCADE ON UPDATE CASCADE
);
-- PRODUCER and RECORD_LABEL have a WORKS_FOR relationship (N:1)
CREATE TABLE WORKS_FOR (
    ProducerID INT,
    LabelID INT,
    PRIMARY KEY (ProducerID, LabelID),
    FOREIGN KEY (ProducerID) REFERENCES PRODUCER(ProducerID),
    FOREIGN KEY (LabelID) REFERENCES RECORD_LABEL(LabelID)
    ON DELETE CASCADE ON UPDATE CASCADE
);